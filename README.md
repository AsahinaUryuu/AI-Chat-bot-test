# 🎙️ AI 日语口语练习助手

> 基于 Gemini + GPT-SoVITS 的实时语音对话系统

## 📖 项目简介

这是一个 AI 语音对话应用的**测试脚本**，也是我开发 AI 聊天 App 的第一步。

### 💡 开发初衷

作为一个日语学习者，我希望能有一个**随时随地练习日语口语**的工具。通过与 AI 进行真实的语音对话，可以：
- 🗣️ 练习日语口语表达和发音
- 👂 通过 AI 语音回复锻炼听力
- 💬 模拟真实日语对话场景
- 🔄 不受时间地点限制，随时练习

### 🎯 最终目标

开发一个能够与 AI 进行**日语语音对话**的口语练习应用：
- 使用 **Unity** 封装成跨平台 App（iOS / Android）
- 调用设备**录音权限**，实现日语语音输入
- 通过**语音识别 (ASR)** 将用户日语语音转换为文字
- 发送给**大语言模型 (LLM)** 进行智能日语回复
- 使用 **GPT-SoVITS** 将回复转换为自然的日语语音
- 播放语音给用户，实现完整的**日语口语练习闭环**

### 🧪 当前阶段

本测试脚本实现了核心的**文字输入 → AI回复 → 语音输出**流程：

```
用户输入文字 → Gemini 3.0 Flash 生成回复 → GPT-SoVITS 合成语音 → 浏览器播放
```

## ✨ 功能特性

- 🤖 **AI 对话**: 使用 Google Gemini 3.0 Flash 模型进行智能对话
- 🔊 **实时语音合成**: 通过 GPT-SoVITS 将 AI 回复转换为自然语音
- ⚡ **流式响应**: AI 回复边生成边显示，语音边合成边播放
- 🎭 **角色扮演**: 预设为《原神》角色"七七"的语气和风格
- 📝 **智能分句**: 按标点符号切分文本，实现更流畅的语音合成

## 🏗️ 技术架构

```
┌─────────────┐     WebSocket    ┌─────────────────┐
│   前端页面   │ ◄──────────────► │   FastAPI 服务  │
│ (index.html)│                  │   (server.py)   │
└─────────────┘                  └────────┬────────┘
                                          │
                          ┌───────────────┼────────────────┐
                          ▼                                 ▼
                 ┌─────────────────┐              ┌─────────────────┐
                 │  Gemini 3.0 API │              │  GPT-SoVITS API │
                 │   (文字生成)     │              │   (语音合成)     │
                 └─────────────────┘              └─────────────────┘
```

## 📁 项目结构

```
ChatWithAI-test/
├── server.py      # FastAPI 后端服务
├── index.html     # 前端聊天界面
└── README.md      # 项目说明文档
```

## 🔧 环境要求

- Python 3.10+
- GPT-SoVITS 服务（本地运行于 `127.0.0.1:9880`）
- Google Gemini API Key

## 📦 依赖安装

```bash
pip install fastapi uvicorn websockets google-generativeai requests
```

## 🚀 使用方法

### 1. 启动 GPT-SoVITS 服务

确保 GPT-SoVITS API 服务已在本地 `9880` 端口运行。

### 2. 启动后端服务

```bash
python server.py
```

服务将在 `http://0.0.0.0:8000` 启动。

### 3. 打开前端页面

在浏览器中打开 `index.html` 文件，即可开始与七七对话！

## ⚙️ 配置说明

在 `server.py` 中可以修改以下配置：

| 配置项 | 说明 |
|--------|------|
| `GEMINI_KEY` | Google Gemini API 密钥 |
| `TTS_API_URL` | GPT-SoVITS 服务地址 |
| `REF_AUDIO_PATH` | 参考音频文件路径 |
| `REF_TEXT` | 参考音频对应的文本 |
| `GPT_MODEL_PATH` | GPT 模型权重路径 |
| `SOVITS_MODEL_PATH` | SoVITS 模型权重路径 |

## 🗺️ 开发路线图

- [x] 文字输入 → AI 回复 → 语音输出（当前阶段）
- [ ] 切换为日语对话模式
- [ ] 训练/使用日语角色语音模型
- [ ] 集成日语语音识别 (ASR) 模块
- [ ] Unity 客户端开发
- [ ] 移动端录音权限适配
- [ ] 添加口语纠错/建议功能
- [ ] App 打包发布

## 📝 技术栈

| 组件 | 技术 |
|------|------|
| 后端框架 | FastAPI + WebSocket |
| AI 模型 | Google Gemini 3.0 Flash |
| 语音合成 | GPT-SoVITS |
| 前端 | 原生 HTML/CSS/JavaScript |
| 未来客户端 | Unity |

## 🎌 未来功能展望

- **多场景对话**: 餐厅点餐、问路、购物等日常场景模拟
- **难度分级**: 根据日语水平 (N5-N1) 调整对话难度
- **口语评测**: AI 评估发音和语法，给出改进建议
- **对话记录**: 保存练习历史，追踪学习进度

## 🙏 致谢

- **语音数据集**: [AI Hobbyist - Genshin_Datasets](https://github.com/AI-Hobbyist/Genshin_Datasets)
  - 开源原神角色语音训练数据集
  - 数据集整理者: [@红血球AE3803](https://github.com/AI-Hobbyist)

---

> 🎮 这是通往 AI 日语口语练习 App 的第一步！